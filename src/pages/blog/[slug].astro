---
import BlogLayout from "~src/layouts/BlogLayout.astro";
const { slug } = Astro.params;
const post = await import(`../_blog/${slug}.md`);
Astro.response.headers.set("Cache-Control", "public, max-age=604800, s-maxage=604800");

export async function getStaticPaths() {
  const blogPosts = (await Astro.glob("../_blog/*.md")).filter((post) => !post.frontmatter.draft);

  return blogPosts.map((blogPost) => {
    return {
      params: {
        slug: blogPost.url?.replace("/_blog/", ""),
      },
    };
  });
}
---

<BlogLayout {...post}>
  <post.Content />
</BlogLayout>
